<!DOCTYPE html>
<html lang="en">

<head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>File Compression Tool</title>
            <style>
                        * {
                                    margin: 0;
                                    padding: 0;
                                    box-sizing: border-box;
                        }

                        body {
                                    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                                    min-height: 100vh;
                                    display: flex;
                                    justify-content: center;
                                    align-items: center;
                                    padding: 20px;
                        }

                        .container {
                                    background: rgba(255, 255, 255, 0.95);
                                    backdrop-filter: blur(10px);
                                    border-radius: 20px;
                                    padding: 40px;
                                    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
                                    max-width: 600px;
                                    width: 100%;
                                    animation: slideUp 0.5s ease-out;
                        }

                        @keyframes slideUp {
                                    from {
                                                opacity: 0;
                                                transform: translateY(30px);
                                    }

                                    to {
                                                opacity: 1;
                                                transform: translateY(0);
                                    }
                        }

                        h1 {
                                    text-align: center;
                                    color: #667eea;
                                    font-size: 2rem;
                                    margin-bottom: 10px;
                                    font-weight: 700;
                        }

                        .subtitle {
                                    text-align: center;
                                    color: #666;
                                    margin-bottom: 40px;
                                    font-size: 0.95rem;
                        }

                        .card {
                                    background: white;
                                    border-radius: 15px;
                                    padding: 30px;
                                    margin-bottom: 20px;
                                    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
                                    transition: transform 0.3s ease, box-shadow 0.3s ease;
                        }

                        .card:hover {
                                    transform: translateY(-5px);
                                    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
                        }

                        .card-title {
                                    font-size: 1.3rem;
                                    color: #333;
                                    margin-bottom: 15px;
                                    display: flex;
                                    align-items: center;
                                    gap: 10px;
                        }

                        .icon {
                                    width: 30px;
                                    height: 30px;
                                    display: inline-block;
                        }

                        .upload-area {
                                    border: 2px dashed #667eea;
                                    border-radius: 10px;
                                    padding: 30px;
                                    text-align: center;
                                    transition: all 0.3s ease;
                                    cursor: pointer;
                                    background: #f8f9ff;
                        }

                        .upload-area:hover {
                                    border-color: #764ba2;
                                    background: #f0f2ff;
                        }

                        .upload-area.dragover {
                                    border-color: #764ba2;
                                    background: #e8ebff;
                                    transform: scale(1.02);
                        }

                        .upload-icon {
                                    font-size: 3rem;
                                    margin-bottom: 10px;
                        }

                        .upload-text {
                                    color: #666;
                                    margin-bottom: 10px;
                        }

                        input[type="file"] {
                                    display: none;
                        }

                        .btn {
                                    width: 100%;
                                    padding: 15px;
                                    border: none;
                                    border-radius: 10px;
                                    font-size: 1rem;
                                    font-weight: 600;
                                    cursor: pointer;
                                    transition: all 0.3s ease;
                                    margin-top: 15px;
                                    text-transform: uppercase;
                                    letter-spacing: 0.5px;
                        }

                        .btn-compress {
                                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                                    color: white;
                        }

                        .btn-compress:hover {
                                    transform: translateY(-2px);
                                    box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
                        }

                        .btn-decompress {
                                    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
                                    color: white;
                        }

                        .btn-decompress:hover {
                                    transform: translateY(-2px);
                                    box-shadow: 0 10px 20px rgba(245, 87, 108, 0.4);
                        }

                        .btn:disabled {
                                    opacity: 0.6;
                                    cursor: not-allowed;
                                    transform: none;
                        }

                        .result {
                                    margin-top: 20px;
                                    padding: 20px;
                                    border-radius: 10px;
                                    display: none;
                                    animation: fadeIn 0.5s ease;
                        }

                        @keyframes fadeIn {
                                    from {
                                                opacity: 0;
                                    }

                                    to {
                                                opacity: 1;
                                    }
                        }

                        .result.success {
                                    background: #d4edda;
                                    border: 1px solid #c3e6cb;
                                    color: #155724;
                        }

                        .result.error {
                                    background: #f8d7da;
                                    border: 1px solid #f5c6cb;
                                    color: #721c24;
                        }

                        .result-title {
                                    font-weight: 600;
                                    margin-bottom: 10px;
                                    font-size: 1.1rem;
                        }

                        .stats {
                                    display: grid;
                                    grid-template-columns: 1fr 1fr;
                                    gap: 10px;
                                    margin-top: 15px;
                        }

                        .stat-item {
                                    background: rgba(255, 255, 255, 0.6);
                                    padding: 10px;
                                    border-radius: 8px;
                        }

                        .stat-label {
                                    font-size: 0.85rem;
                                    color: #666;
                        }

                        .stat-value {
                                    font-size: 1.1rem;
                                    font-weight: 600;
                                    color: #333;
                        }

                        .file-info {
                                    display: none;
                                    margin-top: 15px;
                                    padding: 10px;
                                    background: #e8f5e9;
                                    border-radius: 8px;
                                    color: #2e7d32;
                                    font-size: 0.9rem;
                        }

                        .loading {
                                    display: none;
                                    text-align: center;
                                    margin-top: 15px;
                        }

                        .spinner {
                                    border: 3px solid #f3f3f3;
                                    border-top: 3px solid #667eea;
                                    border-radius: 50%;
                                    width: 40px;
                                    height: 40px;
                                    animation: spin 1s linear infinite;
                                    margin: 0 auto;
                        }

                        @keyframes spin {
                                    0% {
                                                transform: rotate(0deg);
                                    }

                                    100% {
                                                transform: rotate(360deg);
                                    }
                        }
            </style>
</head>

<body>
            <div class="container">
                        <h1>üóúÔ∏è File Compressor</h1>
                        <p class="subtitle">Compress and decompress your files with ease</p>

                        <div class="card">
                                    <div class="card-title">
                                                <span class="icon">üì¶</span>
                                                Compress File
                                    </div>
                                    <div class="upload-area" id="compressUpload"
                                                onclick="document.getElementById('compressFile').click()">
                                                <div class="upload-icon">üì§</div>
                                                <div class="upload-text">Click or drag file here to compress</div>
                                                <small style="color: #999;">Text files supported</small>
                                    </div>
                                    <input type="file" id="compressFile" accept=".txt">
                                    <div class="file-info" id="compressInfo"></div>
                                    <button class="btn btn-compress" id="compressBtn" disabled>Compress File</button>
                                    <div class="loading" id="compressLoading">
                                                <div class="spinner"></div>
                                                <p>Compressing...</p>
                                    </div>
                                    <div class="result" id="compressResult"></div>
                        </div>

                        <div class="card">
                                    <div class="card-title">
                                                <span class="icon">üìÇ</span>
                                                Decompress File
                                    </div>
                                    <div class="upload-area" id="decompressUpload"
                                                onclick="document.getElementById('decompressFile').click()">
                                                <div class="upload-icon">üì•</div>
                                                <div class="upload-text">Click or drag compressed file here</div>
                                                <small style="color: #999;">Compressed .txt files only</small>
                                    </div>
                                    <input type="file" id="decompressFile" accept=".txt">
                                    <div class="file-info" id="decompressInfo"></div>
                                    <button class="btn btn-decompress" id="decompressBtn" disabled>Decompress
                                                File</button>
                                    <div class="loading" id="decompressLoading">
                                                <div class="spinner"></div>
                                                <p>Decompressing...</p>
                                    </div>
                                    <div class="result" id="decompressResult"></div>
                        </div>
            </div>

            <script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"></script>
            <script>
                        let compressFileData = null;
                        let decompressFileData = null;

                        // Compress file handling
                        const compressFileInput = document.getElementById('compressFile');
                        const compressBtn = document.getElementById('compressBtn');
                        const compressUpload = document.getElementById('compressUpload');
                        const compressInfo = document.getElementById('compressInfo');
                        const compressResult = document.getElementById('compressResult');
                        const compressLoading = document.getElementById('compressLoading');

                        // Decompress file handling
                        const decompressFileInput = document.getElementById('decompressFile');
                        const decompressBtn = document.getElementById('decompressBtn');
                        const decompressUpload = document.getElementById('decompressUpload');
                        const decompressInfo = document.getElementById('decompressInfo');
                        const decompressResult = document.getElementById('decompressResult');
                        const decompressLoading = document.getElementById('decompressLoading');

                        // Drag and drop for compress
                        compressUpload.addEventListener('dragover', (e) => {
                                    e.preventDefault();
                                    compressUpload.classList.add('dragover');
                        });

                        compressUpload.addEventListener('dragleave', () => {
                                    compressUpload.classList.remove('dragover');
                        });

                        compressUpload.addEventListener('drop', (e) => {
                                    e.preventDefault();
                                    compressUpload.classList.remove('dragover');
                                    compressFileInput.files = e.dataTransfer.files;
                                    handleCompressFile();
                        });

                        // Drag and drop for decompress
                        decompressUpload.addEventListener('dragover', (e) => {
                                    e.preventDefault();
                                    decompressUpload.classList.add('dragover');
                        });

                        decompressUpload.addEventListener('dragleave', () => {
                                    decompressUpload.classList.remove('dragover');
                        });

                        decompressUpload.addEventListener('drop', (e) => {
                                    e.preventDefault();
                                    decompressUpload.classList.remove('dragover');
                                    decompressFileInput.files = e.dataTransfer.files;
                                    handleDecompressFile();
                        });

                        compressFileInput.addEventListener('change', handleCompressFile);
                        decompressFileInput.addEventListener('change', handleDecompressFile);

                        function handleCompressFile() {
                                    const file = compressFileInput.files[0];
                                    if (file) {
                                                compressInfo.style.display = 'block';
                                                compressInfo.textContent = `‚úì Selected: ${file.name} (${formatBytes(file.size)})`;
                                                compressBtn.disabled = false;
                                                compressResult.style.display = 'none';

                                                const reader = new FileReader();
                                                reader.onload = (e) => {
                                                            compressFileData = e.target.result;
                                                };
                                                reader.readAsText(file);
                                    }
                        }

                        function handleDecompressFile() {
                                    const file = decompressFileInput.files[0];
                                    if (file) {
                                                decompressInfo.style.display = 'block';
                                                decompressInfo.textContent = `‚úì Selected: ${file.name} (${formatBytes(file.size)})`;
                                                decompressBtn.disabled = false;
                                                decompressResult.style.display = 'none';

                                                const reader = new FileReader();
                                                reader.onload = (e) => {
                                                            decompressFileData = e.target.result;
                                                };
                                                reader.readAsText(file);
                                    }
                        }

                        compressBtn.addEventListener('click', () => {
                                    if (!compressFileData) return;

                                    compressLoading.style.display = 'block';
                                    compressBtn.disabled = true;

                                    setTimeout(() => {
                                                try {
                                                            const originalSize = new Blob([compressFileData]).size;
                                                            const compressed = pako.deflate(compressFileData);
                                                            const base64 = btoa(String.fromCharCode.apply(null, compressed));
                                                            const compressedSize = new Blob([base64]).size;
                                                            const ratio = ((1 - compressedSize / originalSize) * 100).toFixed(1);

                                                            downloadFile(base64, 'compressed.txt');

                                                            compressResult.className = 'result success';
                                                            compressResult.style.display = 'block';
                                                            compressResult.innerHTML = `
                        <div class="result-title">‚úÖ Compression Successful!</div>
                        <div class="stats">
                            <div class="stat-item">
                                <div class="stat-label">Original Size</div>
                                <div class="stat-value">${formatBytes(originalSize)}</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">Compressed Size</div>
                                <div class="stat-value">${formatBytes(compressedSize)}</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">Compression Ratio</div>
                                <div class="stat-value">${ratio}%</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">Space Saved</div>
                                <div class="stat-value">${formatBytes(originalSize - compressedSize)}</div>
                            </div>
                        </div>
                    `;
                                                } catch (error) {
                                                            compressResult.className = 'result error';
                                                            compressResult.style.display = 'block';
                                                            compressResult.innerHTML = `
                        <div class="result-title">‚ùå Compression Failed</div>
                        <p>${error.message}</p>
                    `;
                                                } finally {
                                                            compressLoading.style.display = 'none';
                                                            compressBtn.disabled = false;
                                                }
                                    }, 500);
                        });

                        decompressBtn.addEventListener('click', () => {
                                    if (!decompressFileData) return;

                                    decompressLoading.style.display = 'block';
                                    decompressBtn.disabled = true;

                                    setTimeout(() => {
                                                try {
                                                            const decoded = atob(decompressFileData);
                                                            const charData = decoded.split('').map(x => x.charCodeAt(0));
                                                            const binData = new Uint8Array(charData);
                                                            const decompressed = pako.inflate(binData, { to: 'string' });

                                                            downloadFile(decompressed, 'decompressed.txt');

                                                            decompressResult.className = 'result success';
                                                            decompressResult.style.display = 'block';
                                                            decompressResult.innerHTML = `
                        <div class="result-title">‚úÖ Decompression Successful!</div>
                        <p>File has been decompressed and downloaded.</p>
                        <div class="stats">
                            <div class="stat-item">
                                <div class="stat-label">Output Size</div>
                                <div class="stat-value">${formatBytes(new Blob([decompressed]).size)}</div>
                            </div>
                        </div>
                    `;
                                                } catch (error) {
                                                            decompressResult.className = 'result error';
                                                            decompressResult.style.display = 'block';
                                                            decompressResult.innerHTML = `
                        <div class="result-title">‚ùå Decompression Failed</div>
                        <p>Invalid compressed file or corrupted data.</p>
                    `;
                                                } finally {
                                                            decompressLoading.style.display = 'none';
                                                            decompressBtn.disabled = false;
                                                }
                                    }, 500);
                        });

                        function downloadFile(content, filename) {
                                    const blob = new Blob([content], { type: 'text/plain' });
                                    const url = URL.createObjectURL(blob);
                                    const a = document.createElement('a');
                                    a.href = url;
                                    a.download = filename;
                                    document.body.appendChild(a);
                                    a.click();
                                    document.body.removeChild(a);
                                    URL.revokeObjectURL(url);
                        }

                        function formatBytes(bytes) {
                                    if (bytes === 0) return '0 Bytes';
                                    const k = 1024;
                                    const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                                    const i = Math.floor(Math.log(bytes) / Math.log(k));
                                    return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];
                        }
            </script>
</body>

</html>